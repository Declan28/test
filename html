html:
<div class="header">
  <h1>Morgan Stanley | AI at MS</h1>
</div>

<div class="container">
  <h2>File Comparison</h2>

  <div class="form-group">
    <label for="file1">Step 1. Upload content</label>
    <input type="file" id="file1" (change)="onFileSelected($event, 1)" accept=".pdf,.doc,.docx,.ppt" />
    <input type="file" id="file2" (change)="onFileSelected($event, 2)" accept=".pdf,.doc,.docx,.ppt" />
  </div>

  <div class="form-group">
    <label for="summaryFormat">Step 2. Select action</label>
    <select [(ngModel)]="selectedAction" id="summaryFormat">
      <option value="identify-differences">Identify differences</option>
      <option value="merge-documents">Merge documents</option>
    </select>
  </div>

  <div class="form-group">
    <label for="prompt">Step 3. Enter prompt</label>
    <input type="text" id="prompt" [(ngModel)]="userPrompt" placeholder="Enter prompt here" />
  </div>

  <button (click)="onUpload()">Continue</button>

  <h2 *ngIf="uploadSuccess">Comparison Report: </h2>
  <p *ngIf="responseContent">Response from server: {{ responseContent }}</p>
</div>


sass:
.header
  background-color: #003f87
  color: white
  padding: 10px 20px
  text-align: center

.container
  max-width: 600px
  margin: 20px auto
  padding: 20px
  border: 1px solid #ccc
  border-radius: 5px
  background-color: #f9f9f9

  h2
    text-align: left

  .form-group
    margin-bottom: 20px

  label
    display: block
    margin-bottom: 5px
    font-weight: bold

  input[type="file"]
    display: block
    margin: 10px 0

  input[type="text"]
    width: 100%
    padding: 10px
    margin: 10px 0

  select
    width: 100%
    padding: 10px
    margin: 10px 0

  button
    padding: 10px 15px
    background-color: #007bff
    color: white
    border: none
    border-radius: 5px
    cursor: pointer

    &:hover
      background-color: #0056b3

  h2
    color: green

ts:
import { Component } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';  // Import FormsModule here
import { HttpClientModule } from '@angular/common/http';  // Import HttpClientModule here

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.sass'],
  standalone: true,
  imports: [CommonModule, FormsModule, HttpClientModule]  // Include FormsModule and HttpClientModule here
})
export class AppComponent {
  file1Name: string = '';
  file2Name: string = '';
  uploadSuccess: boolean = false;
  selectedAction: string = 'identify-differences';
  userPrompt: string = '';
  responseContent: string = ''; // Define responseContent here

  private file1: File | null = null;
  private file2: File | null = null;

  constructor(private http: HttpClient) {}

  onFileSelected(event: any, fileNumber: number) {
    const file: File = event.target.files[0];
    if (file) {
      if (fileNumber === 1) {
        this.file1 = file;
        this.file1Name = file.name;
      } else if (fileNumber === 2) {
        this.file2 = file;
        this.file2Name = file.name;
      }
    }
  }

  onUpload() {
    if (this.file1 && this.file2 && this.userPrompt) {
      const formData = new FormData();
      formData.append('file1', this.file1);
      formData.append('file2', this.file2);
      formData.append('action', this.selectedAction);
      formData.append('prompt', this.userPrompt);

      this.http.post<any>('http://127.0.0.1:5000/upload', formData).subscribe(
        (response) => {
          this.uploadSuccess = true;
          this.responseContent = response.content; // Storing returned content
        },
        (error) => {
          console.error('Upload failed:', error);
          alert('Failed to upload files');
        }
      );
    } else {
      alert('Please complete all steps before continuing.');
    }
  }
}

python:
from flask import Flask, request, jsonify
from flask_cors import CORS
import fitz  # PyMuPDF

app = Flask(__name__)
CORS(app)

@app.route('/upload', methods=['POST'])
def upload_files():
    file1 = request.files.get('file1')
    file2 = request.files.get('file2')
    action = request.form.get('action')
    prompt = request.form.get('prompt')

    if not file1 or not file2:
        return jsonify({"error": "Files not provided"}), 400

    # Example: Read content from file1 (PDF) using PyMuPDF
    try:
        with fitz.open(stream=file1.read(), filetype="pdf") as pdf:
            content = ""
            for page in pdf:
                content += page.get_text()

    except Exception as e:
        return jsonify({"error": str(e)}), 500
    # Return the extracted content from file1 to the frontend
    return jsonify({"content": content})

if __name__ == '__main__':
    app.run(debug=True)

